#!/usr/bin/env bash
# Configures Nginx server with a 301 redirect

# Update package lists
apt-get update

# Install Nginx
apt-get install -y nginx

# Create a simple HTML file with the required content
echo "Holberton School" > /var/www/html/index.html

# Configure Nginx for the redirect
redirect_config="server {
    listen 80;
    server_name _;
    
    location /redirect_me {
        return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
    }

    location / {
        root /var/www/html;
        index index.html index.htm;
    }
}"

# Apply the new configuration
echo "$redirect_config" > /etc/nginx/sites-available/default

# Restart Nginx without using systemctl
/etc/init.d/nginx restart

# Ensure Nginx is running
/etc/init.d/nginx status
